---
// Fetch the Blood on the Clocktower script data
const scriptUrl = 'https://raw.githubusercontent.com/AbstractDevs/librarian/refs/heads/main/src/data/scripts/rotting-moors/latest.json';

let scriptData: any[] = [];
try {
  const response = await fetch(scriptUrl);
  scriptData = await response.json();
} catch (error) {
  console.error('Failed to fetch script data:', error);
}
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href={`${import.meta.env.BASE_URL}favicon.svg`} />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="generator" content={Astro.generator} />
		<meta name="description" content="Amnesiac - Blood on the Clocktower companion app" />
		<title>Amnesiac - Blood on the Clocktower</title>
		<style>
			body {
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
				max-width: 800px;
				margin: 0 auto;
				padding: 2rem;
				line-height: 1.6;
				background: #1a1a1a;
				color: #e0e0e0;
			}
			.script-header {
				background: #2a2a2a;
				padding: 1.5rem;
				border-radius: 8px;
				margin-bottom: 2rem;
			}
			.script-data {
				background: #333;
				padding: 1rem;
				border-radius: 4px;
				overflow-x: auto;
			}
			pre {
				margin: 0;
				font-size: 0.9rem;
			}
			h1 {
				color: #ff6b6b;
				margin-bottom: 0.5rem;
			}
			.subtitle {
				color: #888;
				margin-bottom: 1rem;
			}
		</style>
	</head>
	<body>
		<div class="script-header">
			<h1>Amnesiac</h1>
			<p class="subtitle">Blood on the Clocktower Companion</p>
			{scriptData.length > 0 && scriptData[0].id === '_meta' && (
				<p><strong>Current Script:</strong> {scriptData[0].name} by {scriptData[0].author}</p>
			)}
		</div>

		<div class="script-data">
			<h2>Script Data (Raw)</h2>
			<pre>{JSON.stringify(scriptData, null, 2)}</pre>
		</div>
	</body>
</html>
